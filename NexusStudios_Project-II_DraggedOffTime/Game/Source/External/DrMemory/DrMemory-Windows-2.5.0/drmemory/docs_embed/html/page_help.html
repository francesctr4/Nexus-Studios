---
title: "Obtaining Help and Reporting Bugs"
layout: default
permalink: /page_help.html
---
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dr. Memory
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Obtaining Help and Reporting Bugs </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md10"></a>
Discussion Email List</h1>
<p>For questions, bug reports, and discussion, join the <a href="http://groups.google.com/group/drmemory-users/">Dr. Memory Users group</a>.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Issue Tracker</h1>
<p>The Dr. Memory issue tracker is located at: <a href="https://github.com/DynamoRIO/drmemory/issues">https://github.com/DynamoRIO/drmemory/issues</a></p>
<h1><a class="anchor" id="sec_debugging"></a>
Debugging Dr. Memory</h1>
<p>For general information about debugging DynamoRIO, please see <a href="https://dynamorio.org/page_debugging.html">its docs</a>. This page contains a couple of how-tos with Dr. Memory specifics.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
General Tips</h2>
<p>If a problem in the Dr. Memory tool itself is encountered, try the following steps to help diagnose the issue:</p>
<ul>
<li>Run the debug version of Dr. Memory and of its underlying engine DynamoRIO by passing "-debug -dr_debug -pause_at_assert" to drmemory.exe. Are any messages reported?</li>
<li>Try running light mode ("-light"). Does the issue appear there?</li>
<li>Try running "-leaks_only -no_count_leaks -no_track_allocs". Does that work?</li>
<li>Try the <a class="el" href="page_download.html#sec_latest_build">latest build</a></li>
<li>Try disabling anti-virus or other invasive software, as it may not interoperate well with Dr. Memory (see <a class="el" href="page_release_notes.html#sec_interop">Interoperability</a>).</li>
<li>Look in the log file, which is in the same process as the results.txt file but is named <code>global.&lt;pid&gt;.log</code> for warnings and other messages. You can increase verbosity via the -verbose flag, but only use higher levels for short-running applications.</li>
</ul>
<h2><a class="anchor" id="sec_narrow"></a>
Narrowing Down the Source of the Problem</h2>
<p>First, as with all debugging scenarios, try to reduce the application workload that shows the problem to the smallest and shortest scenario that you can, to make it easier to analyze upon re-execution.</p>
<p>If you have a reproducible problem where an application does not work properly under Dr. Memory, try running it with each of these sets of runtime options to determine which component of Dr. Memory is responsible. Try these in order, and as soon as your application works, you can then report that it works with one set of options but not with another, which will make it easier for a developer to further diagnose the issue:</p>
<div class="fragment"><div class="line">-no_count_leaks</div>
</div><!-- fragment --><div class="fragment"><div class="line">-light</div>
</div><!-- fragment --><div class="fragment"><div class="line">-leaks_only</div>
</div><!-- fragment --><div class="fragment"><div class="line">-leaks_only -no_count_leaks</div>
</div><!-- fragment --><div class="fragment"><div class="line">-leaks_only -no_count_leaks -no_track_allocs</div>
</div><!-- fragment --><p>If the problem persists with all of the above options to Dr. Memory, try running under plain DynamoRIO. You can run the version in the Dr. Memory package like this (ignore warnings about "incomplete installation"):</p>
<div class="fragment"><div class="line">dynamorio/bin32/drrun -- &lt;application and args&gt;</div>
</div><!-- fragment --><p>For a 64-bit application run this instead:</p>
<div class="fragment"><div class="line">dynamorio/bin64/drrun -- &lt;application and args&gt;</div>
</div><!-- fragment --><p>Alternatively, download <a href="https://dynamorio.org/page_weekly_builds.html">the latest standalone DynamoRIO</a>.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Gathering Additional Data</h2>
<p>To supply data for analyzing and fixing a bug, reproduce the problem using these options to Dr. Memory:</p>
<div class="fragment"><div class="line">-dr_ops <span class="stringliteral">&quot;-dumpcore_mask 0x8bff&quot;</span></div>
</div><!-- fragment --><p>and provide the resulting <code>&lt;appname&gt;.exe.&lt;pid&gt;.00000000.ldmp</code> file from the <code>&lt;installpath&gt;/drmemory/logs/dynamorio/</code> directory. The ldmp should compress nicely.</p>
<p>If there is no ldmp produced, try asking for an ldmp on application faults and not just tool faults:</p>
<div class="fragment"><div class="line">-dr_ops <span class="stringliteral">&quot;-dumpcore_mask 0x48bff&quot;</span></div>
</div><!-- fragment --><p>Additionally, if the run is pretty short, run with the "-verbose 2" option and attach the resulting <code>global.&lt;pid&gt;.log</code> file from the same directory as the results.txt file (compress it if large).</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Windows</h2>
<p>To attach to a Dr. Memory process with the debugger, it's usually easiest to use the DynamoRIO -msgbox_mask flag which pops up a message box and pauses the app: </p><div class="fragment"><div class="line">drmemory.exe -dr_ops <span class="stringliteral">&quot;-msgbox_mask 15&quot;</span> &lt;others flags&gt; -- &lt;command&gt;</div>
</div><!-- fragment --><p><code>-msgbox_mask 15</code> shows message boxes on all DR internal events, including the application start.</p>
<p>Dr. Memory also has options -pause_at_exit, -pause_at_assert (which I normally have on all the time for development with the Dr. Memory Debug build), -pause_at_uninitialized, and -pause_at_unaddressable, each of which pop up message boxes at the appropriate point, allowing for a debugger to be attached.</p>
<p>When the desired message box appears, open windbg and attach (F6 or File-&gt;Attach) to the PID mentioned in the message.</p>
<p>You'll need to tell windbg where the DynamoRIO, Dr. Memory, and private libraries are located. DynamoRIO provides a script for this. You can tell windbg to execute it at startup:</p>
<div class="fragment"><div class="line"><span class="stringliteral">&quot;C:\Program Files (x86)\Debugging Tools for Windows\windbg.exe&quot;</span> -pt 1 -c <span class="stringliteral">&quot;$&gt;&lt;c:\src\dynamorio\tools\windbg-scripts\load_syms&quot;</span></div>
</div><!-- fragment --><p>Or you can execute the command directly at the windbg prompt: </p><div class="fragment"><div class="line">$&gt;&lt;c:\src\dynamorio\tools\windbg-scripts\load_syms</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md15"></a>
Private Symbols</h2>
<p>Dr. Memory will load in private symbols from paths specified by the <code>_NT_SYMBOL_PATH</code> environment variable. Point it at the directory you downloaded the symbols to within windbg. Eventually Dr. Memory will support downloading them but probably never online (xref <a href="https://github.com/DynamoRIO/drmemory/issues#issue/143">issue 143</a>).</p>
<p>E.g., inside windbg: </p><div class="fragment"><div class="line">.symfix c:\src\symbols</div>
<div class="line">.reload</div>
<div class="line">x **!FOO  # force lazy loading <span class="keywordflow">for each</span> module</div>
<div class="line">lm       # check that <span class="stringliteral">&quot;(pdb symbols)&quot;</span> is mentioned <span class="keywordflow">for each</span> system library</div>
</div><!-- fragment --><p>And outside in the shell or systemwide or wherever: </p><div class="fragment"><div class="line">set _NT_SYMBOL_PATH=c:\src\symbols</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md16"></a>
DMP files</h2>
<p>If you can reproduce a Dr. Memory assert in the Debug build, a DMP file would be very helpful. Re-run Dr. Memory with <code>-pause_at_assert</code> and attach as described above, then type this in windbg: </p><div class="fragment"><div class="line">.dump /ma c:\mypath\issue543.dmp</div>
</div><!-- fragment --><p>and get the DMP file. It may take quite a lot of time to write and the file may be pretty large but it's not a big problem as DMP files compress very well.</p>
<p>If you're debugging a custom build, please ZIP the DMP file together with your <code>&lt;debug&gt;/bin</code> and <code>&lt;debug_or_release&gt;/dynamorio</code> directories so we can have your DLL and PDB files as well. Then, attach the ZIP file to the issue you've filed</p>
<h2><a class="anchor" id="autotoc_md17"></a>
Application Callstack</h2>
<p>You can get a callstack of the application by pointing windbg at the frame pointer, stack pointer, and pc to use. A common scenario is when the current windbg frame has a <code>dr_mcontext_t**</code> variable named "mc", and the pc is inside an app_loc_t var named "loc":</p>
<div class="fragment"><div class="line">kb =@@(mc-&gt;ebp) @@(mc-&gt;esp) @@(loc-&gt;u.addr.pc)</div>
</div><!-- fragment --><p>The windbg documentation is very good, so look up these commands to learn more. Note that "@@" switches to C expression mode. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.19-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="float:none;text-align:center"><img border=0 src="favicon.png"> &nbsp;  Dr. Memory version 2.5.0 --- Mon Oct 18 2021 03:09:18 &nbsp; <img border=0 src="favicon.png">
</small></address>
